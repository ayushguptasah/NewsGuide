{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/Ayush Gupta/Desktop/Web App/NewsGuide/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Ayush Gupta/Desktop/Web App/NewsGuide/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\Ayush Gupta\\\\Desktop\\\\Web App\\\\NewsGuide\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useEffect,useState}from\"react\";import NewsItem from\"./NewsItem\";import Spinner from\"./Spinner\";import InfiniteScroll from\"react-infinite-scroll-component\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var News=function News(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),articles=_useState2[0],setArticles=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),page=_useState6[0],setPage=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),totalResults=_useState8[0],setTotalResults=_useState8[1];var capitalizeFirstLetter=function capitalizeFirstLetter(string){return string.charAt(0).toUpperCase()+string.slice(1);};var updateNews=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var url,data,parsedData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:props.setProgress(10);url=\"https://newsapi.org/v2/top-headlines?country=\".concat(props.country,\"&category=\").concat(props.category,\"&apiKey=\").concat(props.apiKey,\"&page=\").concat(page,\"&pageSize=\").concat(props.pageSize);setLoading(true);_context.next=5;return fetch(url);case 5:data=_context.sent;props.setProgress(30);_context.next=9;return data.json();case 9:parsedData=_context.sent;props.setProgress(70);setArticles(parsedData.articles);setTotalResults(parsedData.totalResults);setLoading(false);props.setProgress(100);case 15:case\"end\":return _context.stop();}}},_callee);}));return function updateNews(){return _ref.apply(this,arguments);};}();useEffect(function(){document.title=\"\".concat(capitalizeFirstLetter(props.category),\" - NewsGuide\");updateNews();},[]);var fetchMoreData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var url,data,parsedData;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:url=\"https://newsapi.org/v2/top-headlines?country=\".concat(props.country,\"&category=\").concat(props.category,\"&apiKey=\").concat(props.apiKey,\"&page=\").concat(page+1,\"&pageSize=\").concat(props.pageSize);setPage(page+1);_context2.next=4;return fetch(url);case 4:data=_context2.sent;_context2.next=7;return data.json();case 7:parsedData=_context2.sent;setArticles(articles.concat(parsedData.articles));setTotalResults(parsedData.totalResults);case 10:case\"end\":return _context2.stop();}}},_callee2);}));return function fetchMoreData(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-center\",style:{margin:\"35px 0px\",marginTop:\"80px\"},children:[\"NewsGuide - Top \",capitalizeFirstLetter(props.category),\" Headlines\"]}),loading&&/*#__PURE__*/_jsx(Spinner,{}),/*#__PURE__*/_jsx(InfiniteScroll,{dataLength:articles===null||articles===void 0?void 0:articles.length,next:fetchMoreData,hasMore:(articles===null||articles===void 0?void 0:articles.length)!==totalResults,loader:/*#__PURE__*/_jsx(Spinner,{}),children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:articles===null||articles===void 0?void 0:articles.map(function(element){return/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsx(NewsItem,{title:element.title?element.title:\"\",description:element.description?element.description:\"\",imageUrl:element.urlToImage,newsUrl:element.url,author:element.author,date:element.publishedAt,source:element.source.name})},element.url);})})})})]});};News.defaultProps={country:\"in\",pageSize:8,category:\"general\"};export default News;","map":{"version":3,"sources":["C:/Users/Ayush Gupta/Desktop/Web App/NewsGuide/src/components/News.js"],"names":["React","useEffect","useState","NewsItem","Spinner","InfiniteScroll","News","props","articles","setArticles","loading","setLoading","page","setPage","totalResults","setTotalResults","capitalizeFirstLetter","string","charAt","toUpperCase","slice","updateNews","setProgress","url","country","category","apiKey","pageSize","fetch","data","json","parsedData","document","title","fetchMoreData","concat","margin","marginTop","length","map","element","description","urlToImage","author","publishedAt","source","name","defaultProps"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\n\r\nimport NewsItem from \"./NewsItem\";\r\nimport Spinner from \"./Spinner\";\r\nimport PropTypes from \"prop-types\";\r\nimport InfiniteScroll from \"react-infinite-scroll-component\";\r\n\r\nconst News = (props) => {\r\n  const [articles, setArticles] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [page, setPage] = useState(1);\r\n  const [totalResults, setTotalResults] = useState(0);\r\n\r\n  const capitalizeFirstLetter = (string) => {\r\n    return string.charAt(0).toUpperCase() + string.slice(1);\r\n  };\r\n\r\n  const updateNews = async () => {\r\n    props.setProgress(10);\r\n    const url = `https://newsapi.org/v2/top-headlines?country=${props.country}&category=${props.category}&apiKey=${props.apiKey}&page=${page}&pageSize=${props.pageSize}`;\r\n    setLoading(true);\r\n    let data = await fetch(url);\r\n    props.setProgress(30);\r\n    let parsedData = await data.json();\r\n    props.setProgress(70);\r\n    setArticles(parsedData.articles);\r\n    setTotalResults(parsedData.totalResults);\r\n    setLoading(false);\r\n    props.setProgress(100);\r\n  };\r\n\r\n  useEffect(() => {\r\n    document.title = `${capitalizeFirstLetter(props.category)} - NewsGuide`;\r\n    updateNews();\r\n  }, []);\r\n\r\n \r\n\r\n  const fetchMoreData = async () => {\r\n    const url = `https://newsapi.org/v2/top-headlines?country=${props.country}&category=${props.category}&apiKey=${props.apiKey}&page=${page+1}&pageSize=${props.pageSize}`;\r\n    setPage(page+1)\r\n    let data = await fetch(url);\r\n    let parsedData = await data.json();\r\n    setArticles(articles.concat(parsedData.articles));\r\n    setTotalResults(parsedData.totalResults);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <h1 className=\"text-center\" style={{ margin: \"35px 0px\", marginTop: \"80px\" }}>\r\n        NewsGuide - Top {capitalizeFirstLetter(props.category)} Headlines\r\n      </h1>\r\n      {loading && <Spinner />}\r\n      <InfiniteScroll\r\n        dataLength={articles?.length}\r\n        next={fetchMoreData}\r\n        hasMore={articles?.length !== totalResults}\r\n        loader={<Spinner />}\r\n      >\r\n        <div className=\"container\">\r\n          <div className=\"row\">\r\n            {articles?.map((element) => {\r\n              return (\r\n                <div className=\"col-md-4\" key={element.url}>\r\n                  <NewsItem\r\n                    title={element.title ? element.title : \"\"}\r\n                    description={element.description ? element.description : \"\"}\r\n                    imageUrl={element.urlToImage}\r\n                    newsUrl={element.url}\r\n                    author={element.author}\r\n                    date={element.publishedAt}\r\n                    source={element.source.name}\r\n                  />\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      </InfiniteScroll>\r\n    </>\r\n  );\r\n};\r\n\r\nNews.defaultProps = {\r\n  country: \"in\",\r\n  pageSize: 8,\r\n  category: \"general\",\r\n};\r\n\r\nNews.propTypes = {\r\n  country: PropTypes.string,\r\n  pageSize: PropTypes.number,\r\n  category: PropTypes.string,\r\n};\r\n\r\nexport default News;\r\n"]},"metadata":{},"sourceType":"module"}